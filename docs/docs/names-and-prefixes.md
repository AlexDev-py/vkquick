# Имена и префиксы для команд

Каждая команда, обычно, имеет одно или несколько имен и префиксов. В качестве префикса зачастую используют какой-либо один символ, чтобы пользователи случайно не вызвали команду в процессе своего общения. Например, `!` или `/`, и, получается, что вызовы команд выглядит примерно так:

* `/команда`
* `!помощь`

***

# Обозначение имён
Для обозначения имени команды при ее создании неоюходимо передать специальный параметр `names` либо в виде одного слова, либо в виде списка слов, на которые команда реагирует. Вернемся к примеру из предыдущей страницы:

```python
{!docs_src/index_hello_bot.py!}
```

Здесь мы передали единственное имя `"hi"`, и так обозначили, что команда реагирует именно на `hi`. Например, мы хотим, чтобы команда реагировала как на `hi`, так и на `привет`. Тогда мы можем передать список слов:

```python
{!docs_src/names_and_prefixes_many_names.py!}
```

***

# Префиксы
В целом, можно писать префиксы сразу вместе с именем: `#!python @bot.add_command(names="/hi")`, но тогда возникает проблема — если мы хотим, чтобы команда поддерживала много префиксов, то придется самому вручную прописывать всевозможные вариации использования команды, что очень неудобно. В таком случае мы можем передать специальное поле `prefixes`:

```python
{!docs_src/names_and_prefixes_prefix_usage.py!}
```

Теперь команда будет реагировать на сообщение `/hi`. Если же нам нужно передать несколько префиксов, то так же как и с `names`, сюда можно передать список: `#!python @bot.add_command(prefiex=["/", "!"], names="hi")`. Команда в таком случае среагирует как на `/hi`, так и на `!hi`. И, конечно, список можно передать как в `prefixes`, так и в `names`. VK Quick автоматически будет проверять каждый префикс и каждое имя, группируя их всеми способами

!!! Tip
    Вы можете использовать имена и префиксы с пробелом

***

# Поддержка регулярных выражений
Регулярные выражения — способ универсального обозначения некоторых групп символов и их объединений. Представим, что нам нужно сделать команду, которая будет реагировать на `foo1`, `foo2`, `foo3`... и так до 9. Можно обозначить все имена вручную, а можно просто включить поддержку регулярных выражений:


```python
{!docs_src/names_and_prefixes_regex_usage.py!}
```

`\d` — в регулярных выражениях означает любую цифру. В инициализацию команды мы передали новый флаг — `use_regex_escape`, отвечающий за поддержку регулярных выражений. Без этого флага команда будет реагировать только на `foo\d`

!!! Tip
    `r` перед строкой отключает экранирование, таким образом `\` не экранирует `d`, я является самостоятельным символом. Строка из примера аналогична литералу `"foo\\d"`. `r` часто можно встретить в регулярных выражениях

***

# Регистр команд
По умолчанию, все команды независимы от регистра, то есть наш hello-бот:

```python
{!docs_src/index_hello_bot.py!}
```

Среагирует как на `hi`, как и на `HI`, как и на `hI` и все в таком духе. Поскольку определение имени команды и ее префиксов под капотом сделанно именно с помощью регулярных выражений, для сбора регулярки дополнительно передаются флаги. По умолчанию передается единственный флаг `re.IGNORECASE`, отвечающий за независимость к регистру символов, но вы можете передать свои флаги:


```python
{!docs_src/names_and_prefixes_custom_regex_flags.py!}
```

Сюда мы __в добавок__ передали флаг `re.DOTALL`, отвечающий за поддержку абзацев в группе символов `\s` (всевозможные пробельные). Теперь доступны следующие вызовы команды:

```
foobar
```
```
foo bar
```
```
foo
bar
```
```
foo

bar
```

Если вы не хотите, чтобы команда была независима к регистру, передайте `#!python routing_command_re_flags=0`


!!! Note
    Обратите внимание, что регулярные флаги собираются в _битовую маску_, то есть комбинации из флагов передаются через побитовое OR. Когда вы передаете свои кастомные флаги, `re.IGNORECASE`, который был по умолчанию, больше не входит в состав флагов, поэтому его необходимо заново передать в параметр

***

# Команда, с реакцией на любое сообщение
Иногда возникает необходимсть сделать команду, реагирущую на любое сообщение. Для этого нужно передать единственный флаг `#!python any_text=True`

```python
{!docs_src/names_and_prefixes_any_text.py!}
```

Теперь бот пришлет `Hello!` на абсолютно любое сообщение в лс/беседе

***

!!! Note
    Процесс проверки команды на имя и префиксы называется __роутинг__
